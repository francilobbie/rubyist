<!-- Moderator Dashboard Layout -->
<div class="flex bg-gray-100">
  <!-- Sidebar -->
  <div class="bg-white w-64 px-4 py-8 shadow-md">
    <div class="flex flex-col space-y-6">
        <%= link_to dashboard_show_path, class: "text-indigo-600 flex items-center space-x-2" do %>
          <svg class="h-6 w-6 shrink-0 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
          <span class="font-medium">Dashboard</span>
        <% end %>
        <%= link_to reports_path, class: "text-indigo-600 flex items-center space-x-2" do %>
          <svg class="h-6 w-6 shrink-0 text-gray-400 group-hover:text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
          </svg>
          <span class="font-medium">Reports</span>
        <% end %>
        <%= link_to dashboard_show_path, class: "text-indigo-600 flex items-center space-x-2" do %>
          <svg class="h-6 w-6 shrink-0 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
          <span class="font-medium">Dashboard</span>
        <% end %>
        <%= link_to dashboard_show_path, class: "text-indigo-600 flex items-center space-x-2" do %>
          <svg class="h-6 w-6 shrink-0 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
          <span class="font-medium">Dashboard</span>
        <% end %>
        <%= link_to dashboard_show_path, class: "text-indigo-600 flex items-center space-x-2" do %>
          <svg class="h-6 w-6 shrink-0 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
          <span class="font-medium">Dashboard</span>
        <% end %>

    </div>
    <!-- Sidebar footer -->
    <div class="absolute bottom-0 my-10">
      <a href="/settings" class="text-gray-600 flex items-center space-x-2">
        <svg class="h-6 w-6" ...> <!-- Settings icon --> </svg>
        <span>Settings</span>
      </a>
    </div>
  </div>

  <!-- Content Area -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <header class="flex justify-between items-center p-6">
      <h2 class="text-3xl font-bold text-gray-900">Moderator Dashboard</h2>
      <!-- Add any header content -->
    </header>

    <div class="stats mx-auto grid grid-cols-1 md:grid-cols-3 gap-4 mb-10">
      <div class="stat bg-blue-100 p-4 rounded-lg shadow">
        <p class="text-xl">Total Reports: <%= @reports.count %></p>
      </div>
      <div class="stat bg-yellow-100 p-4 rounded-lg shadow">
        <p class="text-xl">Pending Reports: <%= @reports.where(status: 'pending').count %></p>
      </div>
      <div class="stat bg-red-100 p-4 rounded-lg shadow">
        <p class="text-xl">Resolved Reports: <%= @reports.where(status: 'resolved').count %></p>
      </div>
    </div>


    <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100">
      <div class="container mx-auto px-6 py-8">
        <!-- Dashboard Cards -->
        <section class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
          <!-- Cards go here -->
          <!-- Report Section -->
          <div class="bg-white overflow-hidden shadow rounded-lg">
            <div class="p-5">
              <h3 class="text-lg leading-6 font-medium text-gray-900">
                <%= link_to "Recent Reports", moderation_path %>
              </h3>
              <ul class="mt-3 max-h-56 overflow-y-auto text-sm text-gray-500">
                <% @recent_reports.each do |report| %>
                  <li class="mt-2">
                    <%= link_to "Report ##{report.id}", report_path(report), class: "text-indigo-600 hover:text-indigo-900" %>
                    - Reported by <%= report.user.email %>
                    - <%= report.created_at.strftime("%b %d, %Y") %>
                    <br>
                    Reason: <%= report.content %>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>
        </section>

        <!-- Reports Overview -->
        <section class="mt-8">
          <!-- Table or list overview of reports -->
          <div class="bg-white overflow-hidden shadow rounded-lg mt-8">
            <div class="p-6">
                <h2 class="text-2xl font-bold mb-4">Reports Overview</h2>
                <% if @recent_reports.any? %>
                    <div class="overflow-x-auto relative shadow-md sm:rounded-lg">
                        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                <tr>
                                    <th scope="col" class="py-3 px-6">Report ID</th>
                                    <th scope="col" class="py-3 px-6">Category</th>
                                    <th scope="col" class="py-3 px-6">Reported Entity</th>
                                    <th scope="col" class="py-3 px-6">Status</th>
                                    <th scope="col" class="py-3 px-6">Created At</th>
                                    <th scope="col" class="py-3 px-6">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% @recent_reports.each do |report| %>
                                    <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                                        <td class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white"><%= report.id %></td>
                                        <td class="py-4 px-6"><%= report.category %></td>
                                        <td class="py-4 px-6"><%= report.reportable_type %> ID: <%= report.reportable_id %></td>
                                        <td class="py-4 px-6"><%= report.status.capitalize %></td>
                                        <td class="py-4 px-6"><%= report.created_at.strftime("%B %d, %Y %H:%M") %></td>
                                        <td class="py-4 px-6">
                                            <%= link_to 'View', report_path(report), class: "text-blue-600 hover:text-blue-900" %>
                                        </td>
                                    </tr>
                                <% end %>
                            </tbody>
                        </table>
                    </div>
                <% else %>
                    <p>No reports found.</p>
                <% end %>
            </div>
        </div>
        </section>
      </div>
    </main>
  </div>
</div>
