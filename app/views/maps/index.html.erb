<div class="container mx-auto mt-6">
  <div class="my-5">
    <select onchange="dispatchCityChangeEvent(event)">
      <option value="">Select a City</option>
      <% @regions_with_cities.each do |region, cities| %>
        <optgroup label="<%= region %>">
          <% cities.each do |city| %>
            <option value="<%= city %>"><%= city %></option>
          <% end %>
        </optgroup>
      <% end %>
    </select>
  </div>

  <%# <div data-controller="map" id="map" style="height: 500px;" class="z-10" data-map-companies-value="<%= @companies.to_json(only: [:id, :name, :latitude, :longitude, :city]) %>
    <!-- Map will be initialized here -->
  <%# </div>  %>

<div class="flex items-center justify-center">
  <div data-controller="maps"
      data-maps-access-token-value="pk.eyJ1IjoiZnJhbmNpbG9iYmllIiwiYSI6ImNsdG9nMHRpczBkbXEyanJxd3FsdXRseWcifQ.WflobD8GNh2VbXYo2gS5Vw"
      data-maps-map-style-value="mapbox://styles/mapbox/streets-v11"
      data-maps-company-counts-value="<%= @company_counts.to_json %>"
      id="map" style="width: 800px; height: 620px;">
  </div>
</div>



  <div>
    <h1 class="text-2xl font-bold">Companies</h1>
    <ul>
      <% @companies.each do |company| %>
        <li><%= company.name %> - <%= company.city %></li>
      <% end %>
    </ul>
  </div>
</div>
